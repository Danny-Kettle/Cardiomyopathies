import{_ as h,n as w,p as g,s as _,q as f,u as y,x,y as S,R as v,P as k,g as N,h as V,z as P,r as U,o as l,c as a,b as o,t as c,A as q,w as u,B as m,d,v as C,C as D,D as j,E as L}from"./index-82fd02e2.js";const A={props:{user:Object},data(){return{error:"",email:"",username:"",password:"",confirmPassword:"",firstName:"",lastName:"",institute:"",role:"",isSignup:!1,isDoctor:!1}},watch:{role(){this.isDoctor=this.role==="doctor"}},methods:{handleSubmit(){this.isSignup?(console.log(`Submitting sign up form with email: ${this.email}, username: ${this.username}, password: ${this.password}, confirm password: ${this.confirmPassword}, first name: ${this.firstName}, and last name: ${this.lastName}`),this.confirmPassword!=this.password?this.error="Password and Confirm password does not match":w(g,this.email,this.password).then(async r=>{const s=r.user;_(s);const i={email:this.email,username:this.username,firstName:this.firstName,lastName:this.lastName,institute:this.institute,role:this.role};return console.log("Firestore object:",f),console.log("User data:",i),y(x(f,"users",s.uid),i)}).then(()=>{alert("Successfully signed up! You will now be redirected to the login page."),this.isSignup=!1}).catch(r=>{const s=r.code,i=r.message;console.log(`Signup error: ${s} - ${i}`),alert(`Signup error: ${s} - ${i}`)})):(console.log(`Submitting login form with username: ${this.email} and password: ${this.password}`),S(g,this.email,this.password).then(async r=>{if(!r.user.emailVerified)this.error="Email is not verified please check your inbox and junk";else{const b=v(N(f,"users"),k("email","==",this.email)),e=await V(b);if(!e.empty){const n=e.docs[0],p=n.id,t={email:this.email,username:n.data().username,firstName:n.data().firstName,lastName:n.data().lastName,institute:n.data().institute,role:n.data().role};this.$cookies.set("uid",p,{expires:0}),sessionStorage.setItem("user",JSON.stringify(t)),P.emit("user-changed"),this.$router.push("/")}}}).catch(r=>{const s=r.code,i=r.message;console.log(`Login error: ${s} - ${i}`),alert(`Login error: ${s} - ${i}`)}))}}},E={class:"flex justify-center items-center"},B={class:"flex justify-center w-11/12 lg:w-1/2 my-8"},I={class:"bg-white shadow-md w-full rounded px-12 lg:px-24 py-16"},M={class:"text-xl md:text-2xl font-semibold mb-4"},F={class:"mb-4"},O=o("label",{class:"block mb-2 text-gray-800",for:"email"},"Email",-1),R={key:0,class:"mb-4"},T=o("label",{class:"block mb-2 text-gray-800",for:"username"},"Username",-1),W={class:"mb-4"},z=o("label",{class:"block mb-2 text-gray-800",for:"password"},"Password",-1),G={key:1,class:"mb-4"},J=o("label",{class:"block mb-2 text-gray-800",for:"confirm-password"},"Confirm Password",-1),Y={key:2,class:"mb-4"},H=o("label",{class:"block mb-2 text-gray-800",for:"first-name"},"First Name",-1),K={key:3,class:"mb-4"},Q=o("label",{class:"block mb-2 text-gray-800",for:"last-name"},"Last Name",-1),X={key:4,class:"mb-4"},Z=o("label",{class:"block mb-2 text-gray-800",for:"role"},"Profession",-1),$=o("option",{value:"",disabled:"",selected:""},"Select profession",-1),ee=o("option",{value:"doctor"},"Doctor",-1),se=o("option",{value:"guest"},"Guest",-1),oe=[$,ee,se],te={key:5,class:"mb-4"},re=o("label",{class:"block mb-2 text-gray-800",for:"institute"},"Institute",-1),ie={class:"flex flex-col gap-6 lg:flex-row justify-between mb-4 items-start lg:items-center"},ne={id:"loginButton",class:"px-4 py-2 text-white rounded-md bg-blue-500 hover:bg-blue-600 focus:outline-none focus:bg-blue-600",type:"submit"},le={key:6,class:"flex justify-start lg:justify-end"},ae={key:7},ue={class:"text-red-600"};function de(r,s,i,b,e,n){const p=U("router-link");return l(),a("div",E,[o("div",B,[o("div",I,[o("h2",M,c(e.isSignup?"Create Account":"Login"),1),o("form",{onSubmit:s[9]||(s[9]=q((...t)=>n.handleSubmit&&n.handleSubmit(...t),["prevent"]))},[o("div",F,[O,u(o("input",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",type:"email",name:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=t=>e.email=t),required:""},null,512),[[m,e.email]])]),e.isSignup?(l(),a("div",R,[T,u(o("input",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",type:"text",name:"username",id:"username","onUpdate:modelValue":s[1]||(s[1]=t=>e.username=t),required:""},null,512),[[m,e.username]])])):d("",!0),o("div",W,[z,u(o("input",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",type:"password",name:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=t=>e.password=t),required:""},null,512),[[m,e.password]])]),e.isSignup?(l(),a("div",G,[J,u(o("input",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",type:"password",name:"confirm-password",id:"confirm-password","onUpdate:modelValue":s[3]||(s[3]=t=>e.confirmPassword=t),required:""},null,512),[[m,e.confirmPassword]])])):d("",!0),e.isSignup?(l(),a("div",Y,[H,u(o("input",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",type:"text",name:"first-name",id:"first-name","onUpdate:modelValue":s[4]||(s[4]=t=>e.firstName=t),required:""},null,512),[[m,e.firstName]])])):d("",!0),e.isSignup?(l(),a("div",K,[Q,u(o("input",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",type:"text",name:"last-name",id:"last-name","onUpdate:modelValue":s[5]||(s[5]=t=>e.lastName=t),required:""},null,512),[[m,e.lastName]])])):d("",!0),e.isSignup?(l(),a("div",X,[Z,u(o("select",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",name:"role",id:"role","onUpdate:modelValue":s[6]||(s[6]=t=>e.role=t),required:""},oe,512),[[C,e.role]])])):d("",!0),e.isSignup&&e.isDoctor?(l(),a("div",te,[re,u(o("input",{class:"w-full p-2 border border-gray-400 rounded-md focus:outline-none focus:border-blue-400",type:"text",name:"institute",id:"institute","onUpdate:modelValue":s[7]||(s[7]=t=>e.institute=t),required:""},null,512),[[m,e.institute]])])):d("",!0),o("div",ie,[o("button",ne,c(e.isSignup?"Sign Up":"Log In"),1),o("button",{id:"createAccount",class:"text-blue-500 hover:text-blue-600 focus:outline-none",type:"button",onClick:s[8]||(s[8]=t=>e.isSignup=!e.isSignup)},c(e.isSignup?"Already have an account? Log In":"Don't have an account? Sign Up"),1)]),e.isSignup?d("",!0):(l(),a("div",le,[D(p,{to:"/reset-password",class:"text-blue-600"},{default:j(()=>[L("Forgot password?")]),_:1})])),e.error?(l(),a("div",ae,[o("p",ue,c(e.error),1)])):d("",!0)],32)])])])}const ce=h(A,[["render",de]]);export{ce as default};
